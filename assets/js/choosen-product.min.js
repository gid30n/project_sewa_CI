function getProducts(){new Array;$.getJSON("/api/all-ads/",null,function(a){ko.applyBindings(new ChooseProductViewModel(a))})}function ChooseProductViewModel(a){var b=this;b.inc=function(a){return++index},b.products=a,b.chosenProduct=ko.observable(!1),b.chosenOptions=ko.observableArray(),b.qty=ko.observable(1),b.totalPrice=ko.computed(function(){var a=b.chosenProduct();if(!a)return!1;var c=a.price,d=b.chosenOptions();for(i=0;i<a.options.length;i++)for(j=0;j<d.length;j++)if(a.options[i].optionId==d[j]){c+=a.options[i].price;break}return(c*b.qty()).toFixed(2)}),b.chooseProduct=function(a){b.chosenProduct(a),$("html,body").animate({scrollTop:$("#chosenProduct").offset().top},"slow")},b.optionSelected=function(a){var c=b.chosenOptions();for(selected=!1,j=0;j<c.length;j++)if(a==c[j]){selected=!0;break}return selected},b.productSelected=function(a){return a==b.chosenProduct().id},b.buyProduct=function(){var a=b.chosenProduct(),c=b.chosenOptions(),d=[];for(i=0;i<a.options.length;i++)for(j=0;j<c.length;j++)if(a.options[i].optionId==c[j]){d.push(a.options[i].optionId);break}var e={chosenProductId:b.chosenProduct().id,chosenOptions:d,qty:b.qty()};alert("Data to send to server:\n\n"+JSON.stringify(e))}}var xx=0,index=-1;